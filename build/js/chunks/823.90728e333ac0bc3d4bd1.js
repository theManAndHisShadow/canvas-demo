"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[823],{823:(e,t,n)=>{n.d(t,{A:()=>ae});var r=n(540);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function l(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function c(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var u=new WeakMap,s=new WeakMap,p=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,u,{}),l(this,s,[])},(t=[{key:"subscribe",value:function(e){c(s,this).push(e)}},{key:"setState",value:function(e,t){var n=c(u,this)[e];c(u,this)[e]=t,c(s,this).forEach((function(r){return r(e,t,n)}))}},{key:"getState",value:function(e){return c(u,this)[e]}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=w(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}(this,t)).html={root:e||null,container:e.parentNode},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(r=[{key:"appendToHTML",value:function(e,t){var n=t.element;this.html[e]=t,this.html.root.appendChild(n)}},{key:"updateValue",value:function(e,t){this.html[e].value.innerHTML=t}},{key:"clearRoot",value:function(){this.html.root.innerHTML=""}},{key:"hideWholeBlock",value:function(){this.html.container.style.display="none"}},{key:"unhideWholeBlock",value:function(){this.html.container.style.display="initial"}}])&&b(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}},(t=[{key:"addEventListener",value:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}},{key:"dispatchEvent",value:function(e,t){this.events[e]&&this.events[e].forEach((function(e){return e(t)}))}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function P(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var x=new WeakMap,A=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}(n=function(e,t,n){return t=k(t),function(e,t){if(t&&("object"==S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,n||[],k(e).constructor):t.apply(e,n))}(this,t,[e]),x,"HUD__"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,(r=[{key:"renderItem",value:function(e,t){var n=document.createElement("div");n.id=P(x,this)+e,n.classList.add("display-item");var r=document.createElement("span");r.classList.add(P(x,this)+"display-label",P(x,this)+"item-label"),r.innerHTML=!0===t.hideColon?t.label:t.label+": ";var o=document.createElement("span");return o.classList.add(P(x,this)+"display-value",P(x,this)+"item-value"),o.innerHTML=t.text?t.text:'<i class="pale">no info</i>',n.appendChild(r),n.appendChild(o),this.html[e]=o,this.appendToHTML(e,{element:n,label:r,value:o}),n}},{key:"render",value:function(e){if(e&&Object.keys(e).length>0){this.unhideWholeBlock(),this.clearRoot();for(var t=function(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object.keys(e));t.length>0;){var n=t.shift(),r=e[n];"item"==r.type&&this.renderItem(n,r),0==t.length&&this.dispatchEvent("renderEnd")}}else this.hideWholeBlock()}}])&&j(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function H(e){var t=function(e){if("object"!=C(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}function B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function V(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function N(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var W=new WeakMap,U=new WeakMap,q=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(n=function(e,t,n){return t=R(t),function(e,t){if(t&&("object"==C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,B()?Reflect.construct(t,n||[],R(e).constructor):t.apply(e,n))}(this,t,[e]),W,"scene-info__"),V(n,U,"data-dynamiclly-rendered"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),n=t,r=[{key:"renderInfoBox",value:function(e,t){var n=document.createElement("div");n.id=N(W,this)+e,n.classList.add("display-infobox");var r=document.createElement("span");r.classList.add(N(W,this)+"display-infobox-label",N(W,this)+"item-label"),r.innerHTML="⇢ "+t.label;var o=document.createElement("div");o.innerText=t.text,n.appendChild(r),n.appendChild(o),this.appendToHTML(e,{element:n,label:r,value:o})}},{key:"renderFormula",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1,o=1,i="";if(/\//g.test(e)){var a=e.split("/"),l=function(e){return/(\{|\})/.test(e)?Math.abs(Number(e.replace(/(\{|\})/gm,""))):e};i=1==/\-/gm.test(a[0])?"-":"",r=l(a[0]),o=l(a[1])}else{var c=decimalToFraction(e);i=c.denominator<0?"-":"",r=c.numerator,o=Math.abs(c.denominator)}return"\n                ".concat(i?"<span>"+i+"</span>":"",'\n                <div class="math-fraction ').concat(1==t?"math-fraction--degree-format":"",'">\n                    <div class="math-fraction__numerator">').concat(r,'</div>\n                    <div class="math-fraction__denominator">').concat(o,'</div>\n                </div>\n                <span class="math-fraction__x-symbol">').concat(1==n?"x":"","</span>\n            ")},n=e.split(/(?<![\{])([+-])/gm).map((function(e){if(!/(?<![\{])([+-])/gm.test(e)){if(/x/gm.test(e)){if(/\^/gm.test(e)){var n=e.split(/(\^)/);return n.map((function(e,r){if("^"==e){var o=n[r-1].replace("x",""),i="-"==o||""==o?1:o,a=n[r+1];return/\//g.test(i)&&(o=t(i)),/\//g.test(a)&&(a=t(a.replace("x",""),!0,!0)),"<span>".concat(o).concat("e"==o?"":"x","<sup>").concat(a,"</sup></span>")}})).join("")}if(/\/\d{0,}x/g.test(e))return t(e);var r=e.replace("x","");return/\//g.test(r)&&(r=t(r)),1==r?"x":r+"x"}return/\//g.test(e)?t(e):""==e?"":Number(e)}return e}));e=n.join("");var r=document.createElement("span");return r.innerHTML=e,r.classList.add("math-formula"),r.outerHTML}},{key:"renderSpacer",value:function(){var e=document.createElement("div");return e.classList.add("display-spacer"),this.appendToHTML("spacer",{element:e,label:e,value:null}),e}},{key:"isExist",value:function(e){return void 0!==this.html[e]}},{key:"renderDisplayItem",value:function(e,t){var n=document.createElement("div");n.id=N(W,this)+e,n.classList.add("display-item");var r=document.createElement("span");r.classList.add(N(W,this)+"display-label",N(W,this)+"item-label"),r.innerHTML=!0===t.hideColon?t.label:t.label+": ";var o=document.createElement("span");return o.classList.add(N(W,this)+"display-value",N(W,this)+"item-value"),o.innerHTML=t.text?t.text:'<i class="pale">no info</i>',n.appendChild(r),n.appendChild(o),this.html[e]=o,this.appendToHTML(e,{element:n,label:r,value:o}),n}},{key:"renderDisplayFloatTile",value:function(e,t){var n=this.renderDisplayItem(e,t);return n.classList.remove("display-item"),n.classList.add("display-float-tile"),n}},{key:"dynamicRender",value:function(e,t){var n;"display-item"==t.type&&(n=this.renderDisplayItem(e,t)),"display-float-tile"==t.type&&(n=this.renderDisplayFloatTile(e,t)),"display-spacer"==t.type&&(n=this.renderSpacer()),n&&n.setAttribute(N(U,this),!0)}},{key:"removeDynamicllyRendered",value:function(){Array.from(document.querySelectorAll("[".concat(N(U,this),"]"))).forEach((function(e){e.remove()}))}},{key:"render",value:function(e){if(e&&Object.keys(e).length>0){this.unhideWholeBlock(),this.clearRoot();for(var t=function(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object.keys(e));t.length>0;){var n=t.shift(),r=e[n];"display-item"==r.type&&this.renderDisplayItem(n,r),"display-float-tile"==r.type&&this.renderDisplayFloatTile(n,r),"display-spacer"==r.type&&this.renderSpacer(),"display-infobox"==r.type&&this.renderInfoBox(n,r),0==t.length&&this.dispatchEvent("renderEnd")}}else this.hideWholeBlock()}}],r&&D(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function X(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function Y(e,t){return e.get(function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(e,t))}var Z=new WeakMap,ee=new WeakMap,te=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),X(r=function(e,t,n){return t=K(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,J()?Reflect.construct(t,n||[],K(e).constructor):t.apply(e,n))}(this,t,[e]),Z,"data-rendered-control-element"),X(r,ee,"data-main-action-button"),r.parent=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(t,e),n=t,(r=[{key:"renderCheckbox",value:function(e,t){var n=this,r=document.createElement("div");r.id=e;var o=document.createElement("span");o.innerText=t.label+": ",o.classList.add("controls__checkbox-label","controls__option-label");var i=document.createElement("input");i.type="checkbox",i.classList.add("controls__checkbox-checkbox"),i.checked=t.state,i.setAttribute(Y(Z,this),this.currentSceneTimestamp),this.parent.states.setState(e,t.state),i.addEventListener("click",(function(t){n.parent.states.setState(e,i.checked)})),r.appendChild(o),r.appendChild(i),this.appendToHTML(e,{element:r,label:o,value:i})}},{key:"renderInput",value:function(e,t){var n=this;t.minValue="number"==typeof t.minValue?t.minValue:t.defaultValue;var r=document.createElement("div");r.id=e;var o=document.createElement("span");o.classList.add("controls__input-label","controls__option-label"),o.innerText=t.label+": ";var i=document.createElement("input");i.classList.add("controls__input-input"),i.type="number",i.min=t.minValue,i.max=t.maxValue,i.placeholder="max "+t.maxValue,i.setAttribute(Y(Z,this),this.currentSceneTimestamp),i.value=t.defaultValue,this.parent.states.setState(e,t.defaultValue),i.addEventListener("change",(function(r){Number(i.value)>t.maxValue&&(i.value=t.maxValue),Number(i.value)<t.minValue&&(i.value=t.minValue),n.parent.states.setState(e,Number(i.value))})),r.appendChild(o),r.appendChild(i),this.appendToHTML(e,{element:r,label:o,value:i})}},{key:"renderRangeSlider",value:function(e,t){var n=this,r=document.createElement("div");r.id=e;var o=document.createElement("span");o.innerText=t.startLabel,o.classList.add("controls__range-slider-start-label","controls__option-label");var i=document.createElement("input");i.type="range",i.min=t.minValue,i.max=t.maxValue,i.value=t.defaultValue,i.classList.add("controls__range-slider"),i.setAttribute(Y(Z,this),this.currentSceneTimestamp),i.checked=t.state;var a=document.createElement("span");a.innerText=t.endLabel,a.classList.add("controls__range-slider-end-label","controls__option-label"),this.parent.states.setState(e,t.defaultValue),i.addEventListener("mousemove",(function(t){i.title=i.value,n.parent.states.setState(e,i.value)})),r.appendChild(o),r.appendChild(i),r.appendChild(a),this.appendToHTML(e,{element:r,label:[o,a],value:i})}},{key:"renderButton",value:function(e,t){var n=this,r=document.createElement("div");r.id=e;var o=document.createElement("span");o.innerHTML=t.label+": ";var i=document.createElement("button");i.classList.add("controls__button"),i.setAttribute(Y(Z,this),this.currentSceneTimestamp),i.textContent=t.text,i.addEventListener("click",(function(){var t=Date.now();n.parent.states.setState(e,t)})),r.appendChild(o),r.appendChild(i),this.appendToHTML(e,{element:r,label:o,value:i})}},{key:"renderMainActionButton",value:function(e,t){var n=this,r=document.createElement("div");r.id=e;var o=document.createElement("button");o.classList.add("controls__main-action-button"),o.setAttribute(Y(ee,this),""),o.setAttribute(Y(Z,this),this.currentSceneTimestamp),o.textContent=t.text,o.addEventListener("click",(function(){var t=Date.now();n.parent.states.setState(e,t)})),r.appendChild(o),this.appendToHTML(e,{element:r,label:null,value:o})}},{key:"renderOptionSelector",value:function(e,t){var n=this,r=document.createElement("div");r.id=e;var o=document.createElement("span");o.classList.add("controls__option-selector-label","controls__option-label"),o.innerText=t.label+": ";var i=document.createElement("div");i.classList.add("controls__buttons-container"),t.optionNames.forEach((function(t,o){var a=document.createElement("button");a.classList.add("controls__option-selector-button"),a.setAttribute(Y(Z,n),n.currentSceneTimestamp),a.textContent=t,a.setAttribute("data-preset-num",o),0==o&&a.setAttribute("data-selected-option",!0),a.addEventListener("click",(function(){var t=Array.from(r.querySelectorAll('[data-selected-option="true"]'));t.length>0&&t.forEach((function(e){return e.removeAttribute("data-selected-option")})),a.setAttribute("data-selected-option",!0),n.parent.states.setState(e,Number(o))})),i.appendChild(a)})),this.parent.states.setState(e,t.defaultValue),r.appendChild(o),r.appendChild(i),this.appendToHTML(e,{element:r,label:o,value:i})}},{key:"renderOptionDropdownList",value:function(e,t){var n=this,r=document.createElement("div");r.id=e;var o=document.createElement("span");o.classList.add("controls__option-dropdown-list-label","controls__option-dropdown-list-label"),o.innerText=t.label+": ";var i=document.createElement("select");return i.classList.add("controls__option-dropdown-list-container"),t.options.forEach((function(r,o){var a=document.createElement("option");a.classList.add("controls__option-dropdown-list-button"),a.setAttribute(Y(Z,n),n.currentSceneTimestamp),a.textContent=r.name,a.setAttribute("data-preset-num",o),t.selectedByDefault===o&&(a.setAttribute("selected",""),n.parent.states.setState(e,Number(o))),i.appendChild(a)})),i.addEventListener("change",(function(t){var r=Number(i.selectedOptions[0].getAttribute("data-preset-num"));n.parent.states.setState(e,Number(r))})),r.appendChild(o),r.appendChild(i),this.appendToHTML(e,{element:r,label:o,value:i}),r}},{key:"renderPresetDropdownList",value:function(e,t){var n=this,r=this.renderOptionDropdownList(e,t).querySelector("select"),o=function(){var o,i=Object.keys(n.html),a=Number(r.selectedOptions[0].getAttribute("data-preset-num")),l=t.options[a].allowedElements;if(!Array.isArray(l))throw new Error("option.allowedElements type must be an array!");o=0===l.length?i.filter((function(t){return t!==e&&"root"!==t})):l.includes("*")?[]:i.filter((function(t){return t!==e&&"root"!==t&&!l.includes(t)})),i.forEach((function(e){if("root"!==e){var t=n.html[e].element;o.includes(e)?t&&t.classList.add("hidden"):t&&t.classList.remove("hidden")}}))};r.addEventListener("change",o),this.addEventListener("renderEnd",o)}},{key:"render",value:function(e){if(e){this.clearRoot();for(var t=function(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object.keys(e));t.length>0;){var n=t.shift(),r=e[n];"range-slider"==r.type&&this.renderRangeSlider(n,r),"main-action-button"==r.type&&this.renderMainActionButton(n,r),"button"==r.type&&this.renderButton(n,r),"checkbox"==r.type&&this.renderCheckbox(n,r),"input"==r.type&&this.renderInput(n,r),"option-selector"==r.type&&this.renderOptionSelector(n,r),"option-dropdown-list"==r.type&&this.renderOptionDropdownList(n,r),"preset-dropdown-list"==r.type&&this.renderPresetDropdownList(n,r),0==t.length&&this.dispatchEvent("renderEnd")}}}}])&&$(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(g);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oe(r.key),r)}}function oe(e){var t=function(e){if("object"!=ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}var ie=function(){return e=function e(t){var n=t.HUD,r=t.outputPanel,o=t.controlPanel,i=t.timestamp;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentSceneTimestamp=i,this.states=new p,this.HUD=new A(n),this.outputPanel=new q(r),this.controlPanel=new te(o,this)},(t=[{key:"render",value:function(e){for(var t=0,n=["HUD","outputPanel","controlPanel"];t<n.length;t++){var r=n[t];this[r].render(e[r])}}}])&&re(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const ae=function(e){var t=e.title,n=e.description,o=e.tags,i=e.uiTree,a=e.setDescription,l=e.setTags,c=e.code;return(0,r.useEffect)((function(){a(n),l(o);var e=new ie({timestamp:Date.now(),HUD:document.querySelector("#HUD div"),outputPanel:document.querySelector("#scene-info"),controlPanel:document.querySelector("#controls")});e.render(i),c(e.HUD,e.outputPanel,e.states)}),[a,l,c]),r.createElement("div",{className:"wide-block block"},r.createElement("h2",null,t),r.createElement("div",{id:"HUD"},r.createElement("h4",null,"[HUD]"),r.createElement("div",null)),r.createElement("canvas",{width:600,height:400}))}}}]);