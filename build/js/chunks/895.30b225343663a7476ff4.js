"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[895],{895:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var i=r(540),o=r(823),n=r(31);function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,y(i.key),i)}}function f(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var v=function(){return f((function e(){d(this,e),this.events={}}),[{key:"addEventListener",value:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}},{key:"dispatchEvent",value:function(e,t){this.events[e]&&this.events[e].forEach((function(e){return e(t)}))}}])}(),g=new WeakSet,b=function(e){function t(e){var r,i,o,n,s=e.id,c=void 0===s?null:s,u=e.renderer,f=e.cx,y=e.cy,v=e.r,b=e.angle,p=void 0===b?.001:b,m=e.direction,x=void 0===m?1:m,T=e.linkedTo,w=void 0===T?null:T,O=e.toothing,C=void 0===O?"external":O,S=e.numberOfTeeth,H=e.tootheHeight,P=e.role,E=void 0===P?"slave":P,M=e.fillColor,j=void 0===M?"rgba(255, 255, 255, 0.1)":M,R=e.alternativeFillColor,W=e.borderColor,B=void 0===W?"rgba(255, 255, 255, 1)":W,_=e.alternativeBorderColor,L=e.borderLineWidth,F=void 0===L?2:L,V=e.devMode,q=void 0!==V&&V;return d(this,t),R="string"==typeof R?R:k(C,E,.4),_="string"==typeof _?_:k(C,E,1),function(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}((i=this,o=l(o=t),r=function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(i,h()?Reflect.construct(o,n||[],l(i).constructor):o.apply(i,n))),g),r.id=c,r.cx=f,r.cy=y,r.r=v,r.angle=p,r.direction=x,r.rotations=0,r.role=E,r.linkedTo="driver"==E?null:w,r.toothing=C,r.numberOfTeeth=S,r.tootheHeight=H,r.fillColor=j,r.alternativeFillColor=R,r.borderColor=B,r.alternativeBorderColor=_,r.borderLineWidth=F,r.renderer=u,r.devMode=q,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),f(t,[{key:"getRotationSpeed",value:function(e){var t=this;if(null===this.linkedTo)return 1;var r=e.find((function(e){return e.id===t.linkedTo}));return r.getRotationSpeed(e)*r.direction*(r.numberOfTeeth/this.numberOfTeeth*this.direction)}},{key:"rotate",value:function(e){this.angle+=e,Math.abs(this.angle)>=360&&(this.angle=this.angle%360,this.dispatchEvent("fullRotation"))}},{key:"render",value:function(){"external"==this.toothing?(c(g,this,p).call(this),c(g,this,x).call(this)):"internal"==this.toothing&&c(g,this,T).call(this)}}])}(v);function p(){var e=this.devMode?this.alternativeFillColor:this.fillColor,t=this.devMode?this.alternativeBorderColor:this.borderColor;if((0,n.hp)(this.renderer,{cx:this.cx,cy:this.cy,r:10,fillColor:"driver"==this.role?t:e,borderColor:t,borderThickness:this.borderLineWidth}),"driver"==this.role){var r=this.r/3,i={x:this.cx,y:this.cy-r-4},o=(0,n.sR)(this.cx,this.cy,i.x,i.y,this.angle);(0,n.hp)(this.renderer,{cx:this.cx,cy:this.cy,r,fillColor:e,borderColor:t,borderThickness:this.borderLineWidth}),(0,n.V6)(this.renderer,{x1:this.cx,y1:this.cy,x2:o.x,y2:o.y,thickness:10,fillColor:t})}if(!0===this.devMode){var h={x:this.cx,y:this.cy-this.r+this.tootheHeight+5},l=(0,n.sR)(this.cx,this.cy,h.x,h.y,this.angle);(0,n.V6)(this.renderer,{x1:this.cx,y1:this.cy,x2:l.x,y2:l.y,thickness:3,color:"driver"==this.role?"red":"white"})}}function m(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.r-this.tootheHeight,r=[this.r,this.r,t,t],i=r.length,o=this.numberOfTeeth*i,h=0;h<o;h++){var l=2*Math.PI*h/o,s=r[h%i],c=this.cx+s*Math.cos(l),a=this.cy+s*Math.sin(l),d=(0,n.sR)(this.cx,this.cy,c,a,this.angle);0==h?this.renderer.moveTo(d.x,d.y):this.renderer.lineTo(d.x,d.y)}!0===e&&this.renderer.closePath()}function x(){var e=this.devMode?this.alternativeBorderColor:this.borderColor,t=this.devMode?this.alternativeFillColor:this.fillColor;this.renderer.beginPath(),c(g,this,m).call(this),this.renderer.fillStyle=t,this.renderer.strokeStyle=e,this.renderer.lineWidth=this.borderLineWidth,this.renderer.fill(),this.renderer.stroke(),this.renderer.closePath()}function T(){var e=this.devMode?this.alternativeBorderColor:this.borderColor,t=this.devMode?this.alternativeFillColor:this.fillColor;if(this.renderer.beginPath(),this.renderer.arc(this.cx,this.cy,this.r+8,0,2*Math.PI),c(g,this,m).call(this),this.renderer.closePath(),this.renderer.fillStyle=t,this.renderer.fill("evenodd"),this.renderer.lineWidth=this.borderLineWidth,this.renderer.strokeStyle=e,this.renderer.stroke(),this.devMode){var r={x:this.cx,y:this.cy+this.r},i=(0,n.sR)(this.cx,this.cy,r.x,r.y,this.angle);(0,n.V6)(this.renderer,{x1:this.cx,y1:this.cy,x2:i.x,y2:i.y,thickness:3,color:"white"})}}function k(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"external"===e?"driver"===t?"rgba(255, 152, 0, ".concat(r,")"):"rgba(51, 127, 255, ".concat(r,")"):"rgba(158, 25, 45, ".concat(r,")")}function w(e,t,r){var i=document.querySelector("#root").querySelector("canvas"),o=i.getContext("2d");i.width=600,i.height=400;var h=200.5,l=[[{id:0,role:"driver",cx:361,cy:h,r:170,numberOfTeeth:30,tootheHeight:25},{id:1,linkedTo:0,cx:169,cy:174.5,r:40,numberOfTeeth:5,tootheHeight:18}],[{id:0,role:"driver",cx:169,cy:174.5,r:40,numberOfTeeth:5,tootheHeight:18},{id:1,linkedTo:0,cx:361,cy:h,r:170,numberOfTeeth:30,tootheHeight:25}],[{id:0,role:"driver",cx:484,cy:h,r:40,numberOfTeeth:13,tootheHeight:10},{id:1,linkedTo:0,angle:-35,cx:411,cy:h,r:40,numberOfTeeth:13,tootheHeight:10},{id:2,linkedTo:1,angle:-56,cx:338,cy:h,r:40,numberOfTeeth:13,tootheHeight:10},{id:3,linkedTo:2,angle:-90,cx:264,cy:h,r:40,numberOfTeeth:13,tootheHeight:10},{id:4,linkedTo:3,angle:-138,cx:191,cy:h,r:40,numberOfTeeth:13,tootheHeight:10},{id:5,linkedTo:4,angle:-173,cx:118,cy:h,r:40,numberOfTeeth:13,tootheHeight:10}],[{id:0,role:"driver",cx:531,cy:h,r:40,numberOfTeeth:13,tootheHeight:10},{id:1,linkedTo:0,angle:-16,cx:418,cy:h,r:80,numberOfTeeth:26,tootheHeight:14},{id:2,linkedTo:1,angle:-32,cx:189,cy:h,r:160,numberOfTeeth:52,tootheHeight:14}],[{id:0,role:"driver",cx:531,cy:h,r:40,numberOfTeeth:13,tootheHeight:10},{id:1,linkedTo:0,angle:13,cx:438,cy:h,r:60,numberOfTeeth:20,tootheHeight:12},{id:2,linkedTo:1,angle:7,cx:307,cy:h,r:80,numberOfTeeth:28,tootheHeight:12},{id:3,linkedTo:2,angle:7,cx:136,cy:h,r:100,numberOfTeeth:36,tootheHeight:12}],[{id:0,role:"driver",cx:301,cy:h,r:80,numberOfTeeth:28,tootheHeight:13},{id:1,linkedTo:0,cx:203,cy:273.5,r:50,numberOfTeeth:15,tootheHeight:14},{id:2,linkedTo:0,cx:400,cy:272.5,r:50,numberOfTeeth:15,tootheHeight:14},{id:3,linkedTo:0,cx:301,cy:78.5,r:50,numberOfTeeth:15,tootheHeight:14},{id:4,linkedTo:0,cx:301,cy:h,r:176,toothing:"internal",numberOfTeeth:55,tootheHeight:14}]],s=null;r.subscribe((function(e,t,i){"selectedPreset"==e&&(s=[],l[t].forEach((function(e,i){var h=l[t].find((function(t){return t.id==e.linkedTo}));e.direction="driver"==e.role?1:-1*h.direction,e.renderer=o,e.devMode=r.getState("dev");var c=new b(e),a=(0,n.G1)(i,!0);"gear_".concat(a),l[t].find((function(e){return"internal"==e.toothing}))&&"external"==c.toothing&&c.role,c.addEventListener("fullRotation",(function(){c.rotations+=1})),s.push(c)}))),"dev"==e&&s.forEach((function(e){return e.devMode=t}))})),r.setState("selectedPreset",0),r.setState("dev",!1);var c=function(){o.clearRect(0,0,600,400),function(e,t){var r=t.canvasWidth,i=t.canvasHeight,o=!0===t.devMode?"#212125":"#5b55e1",h=25;(0,n.tk)(e,{x:0,y:0,width:r,height:i,fillColor:o}),(0,n.Xw)(e,{cellSize:25,lineThickness:.5,lineColor:"rgba(255, 255, 255, 0.01)"}),(0,n.Xw)(e,{cellSize:i/4,lineThickness:1,lineColor:"rgba(255, 255, 255, 0.04)"}),(0,n.tk)(e,{x:0,y:0,width:r,height:h,fillColor:o}),(0,n.tk)(e,{x:0,y:i-h+1,width:r,height:h,fillColor:o}),(0,n.tk)(e,{x:0,y:0,width:h,height:i,fillColor:o}),(0,n.tk)(e,{x:r-h+1,y:0,width:h,height:i,fillColor:o})}(o,{canvasWidth:600,canvasHeight:400,devMode:r.getState("dev")}),s.forEach((function(e,t){e.render();var i=r.getState("rotationSpeed")/10,o=e.getRotationSpeed(s);e.rotate(i*o)})),requestAnimationFrame(c)};requestAnimationFrame(c)}const O=function(e){var t=e.setDescription,r=e.setTags;return i.createElement(o.A,{title:"Spinning gears",description:"A visual demonstration of the «gear ratio» principle helps you see with your own eyes how gears with different numbers of teeth interact with each other.",tags:["gears","animation","mechanics"],uiTree:{HUD:{},outputPanel:{},controlPanel:{dev:{type:"checkbox",label:"Show dev visual",state:!1},rotationSpeed:{type:"input",label:"Rotation speed",minValue:0,maxValue:100,defaultValue:5},selectedPreset:{type:"preset-dropdown-list",label:"Preset",selectedByDefault:0,options:[{name:"Big driver gear",allowedElements:["*"]},{name:"Small driver gear",allowedElements:["*"]},{name:"Chain of equal gears",allowedElements:["*"]},{name:"Chain 1:2:4",allowedElements:["*"]},{name:"Smooth increase",allowedElements:["*"]},{name:"Planetary gearbox",allowedElements:["*"]}]}}},code:w,setDescription:t,setTags:r})}}}]);